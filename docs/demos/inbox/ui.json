{
  "schemaVersion": "1.0.0",
  "imports": {
    "components": [
      "./components/conversationItem.json",
      "./components/messageItem.json",
      "./components/profilePanel.json"
    ]
  },
  "state": {
    "selectedConversationId": "1",
    "selectedUserId": "user_robert"
  },
  "intents": {
    "conversation.select": {
      "handler": {
        "type": "action.state.patch",
        "path": "selectedConversationId",
        "value": "{{conversationId}}"
      }
    },
    "user.viewProfile": {
      "handler": {
        "type": "action.state.patch",
        "path": "selectedUserId",
        "value": "{{userId}}"
      }
    },
    "category.select": {
      "handler": {
        "type": "action.state.patch",
        "path": "selectedCategory",
        "value": "{{category}}"
      }
    }
  },
  "screen": {
    "type": "layout.row",
    "spacing": 0,
    "children": [
      {
        "type": "layout.column",
        "spacing": 0,
        "flex": 28,
        "overflow": "auto",
        "backgroundColor": "#ffffff",
        "borderRight": "1px solid #d0d0d0",
        "children": [
          {
            "type": "layout.column",
            "padding": 16,
            "spacing": 16,
            "children": [
              {
                "type": "layout.row",
                "mainAxisAlignment": "spaceBetween",
                "crossAxisAlignment": "center",
                "children": [
                  {
                    "type": "text",
                    "content": "Direct messages",
                    "style": "titleMedium",
                    "fontWeight": "bold"
                  },
                  {
                    "type": "button.icon",
                    "icon": "‚úï",
                    "size": "small"
                  }
                ]
              },
              {
                "type": "divider"
              },
              {
                "type": "input.text",
                "placeholder": "üîç Search for a name"
              },
              {
                "type": "tabs",
                "tabs": [
                  {
                    "id": "inbox",
                    "label": "Inbox",
                    "content": {
                      "type": "collection",
                      "layout": "list",
                      "data": {
                        "type": "action.http",
                        "method": "GET",
                        "url": "/api/inbox/conversations"
                      },
                      "itemTemplate": {
                        "type": "component.conversationItem",
                        "props": {
                          "conversation": "{{item}}"
                        }
                      }
                    }
                  },
                  {
                    "id": "unread",
                    "label": "Unread",
                    "badge": 3,
                    "content": {
                      "type": "collection",
                      "layout": "list",
                      "data": {
                        "type": "action.http",
                        "method": "GET",
                        "url": "/api/inbox/conversations/unread"
                      },
                      "itemTemplate": {
                        "type": "component.conversationItem",
                        "props": {
                          "conversation": "{{item}}"
                        }
                      }
                    }
                  },
                  {
                    "id": "agents",
                    "label": "Agents",
                    "content": {
                      "type": "collection",
                      "layout": "list",
                      "data": {
                        "type": "action.http",
                        "method": "GET",
                        "url": "/api/inbox/conversations/agents"
                      },
                      "itemTemplate": {
                        "type": "component.conversationItem",
                        "props": {
                          "conversation": "{{item}}"
                        }
                      }
                    }
                  }
                ],
                "defaultTab": "inbox"
              }
            ]
          }
        ]
      },
      {
        "type": "layout.column",
        "flex": 47,
        "spacing": 0,
        "backgroundColor": "#ffffff",
        "borderRight": "1px solid #d0d0d0",
        "children": [
          {
            "type": "layout.row",
            "padding": 16,
            "mainAxisAlignment": "spaceBetween",
            "crossAxisAlignment": "center",
            "children": [
              {
                "type": "layout.row",
                "spacing": 8,
                "crossAxisAlignment": "center",
                "children": [
                  {
                    "type": "text",
                    "content": "Clarity Community üî•",
                    "style": "titleMedium",
                    "fontWeight": "bold"
                  },
                  {
                    "type": "button.icon",
                    "icon": "‚ñº",
                    "size": "small"
                  }
                ]
              },
              {
                "type": "button.icon",
                "icon": "‚ãÆ",
                "size": "small"
              }
            ]
          },
          {
            "type": "divider"
          },
          {
            "type": "layout.column",
            "flex": 1,
            "padding": 16,
            "spacing": 24,
            "overflow": "auto",
            "children": [
              {
                "type": "layout.column",
                "spacing": 2,
                "crossAxisAlignment": "center",
                "children": [
                  {
                    "type": "text",
                    "content": "MONDAY, OCTOBER 28TH",
                    "style": "bodySmall",
                    "color": "onSurfaceVariant",
                    "fontWeight": "bold"
                  }
                ]
              },
              {
                "type": "collection",
                "layout": "list",
                "itemSpacing": 32,
                "data": {
                  "type": "action.http",
                  "method": "GET",
                  "url": "/api/inbox/messages?conversationId={{state.selectedConversationId}}"
                },
                "itemTemplate": {
                  "type": "component.messageItem",
                  "props": {
                    "message": "{{item}}"
                  }
                }
              }
            ]
          },
          {
            "type": "divider"
          },
          {
            "type": "layout.row",
            "padding": 16,
            "spacing": 12,
            "crossAxisAlignment": "center",
            "children": [
              {
                "type": "button.icon",
                "icon": "üìé",
                "size": "medium"
              },
              {
                "type": "input.text",
                "placeholder": "Send a message...",
                "flex": 1,
                "borderRadius": 12
              },
              {
                "type": "button.icon",
                "icon": "üòä",
                "size": "medium"
              },
              {
                "type": "button.icon",
                "icon": "üñºÔ∏è",
                "size": "medium"
              }
            ]
          }
        ]
      },
      {
        "type": "layout.column",
        "spacing": 0,
        "flex": 25,
        "overflow": "auto",
        "backgroundColor": "#ffffff",
        "children": [
          {
            "type": "collection",
            "layout": "list",
            "data": {
              "type": "action.http",
              "method": "GET",
              "url": "/api/inbox/profile?userId={{state.selectedUserId}}"
            },
            "itemTemplate": {
              "type": "component.profilePanel",
              "props": {
                "profile": "{{item}}"
              }
            }
          }
        ]
      }
    ]
  }
}
